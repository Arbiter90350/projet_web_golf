# Exemple de configuration .env (à copier en .env)
# ATTENTION: ne JAMAIS committer des secrets réels en production.

# --- Base de données MongoDB (Docker) ---
MONGO_INITDB_ROOT_USERNAME=admin
MONGO_INITDB_ROOT_PASSWORD=change_me
MONGO_INITDB_DATABASE=fairway

# --- Backend ---
JWT_SECRET=change_me_super_secret
NODE_ENV=development
PORT=5000
FRONTEND_URL=http://localhost

# Niveau de log (dev: debug, prod: info)
LOG_LEVEL=debug

# Fait confiance au proxy (ex: Nginx) pour récupérer la bonne IP client
# Mettre à 1 en production derrière Nginx/Reverse proxy (recommandé pour le rate limiting)
TRUST_PROXY=0

# --- Serveur HTTP (timeouts) ---
# Temps maximum pour traiter une requête (Node server.requestTimeout)
SERVER_REQUEST_TIMEOUT_MS=60000
# Temps maximum pour recevoir les en-têtes (Node server.headersTimeout)
SERVER_HEADERS_TIMEOUT_MS=65000
# Timeout keep-alive (Node server.keepAliveTimeout)
SERVER_KEEPALIVE_TIMEOUT_MS=60000
# Timeout socket bas-niveau (optionnel; 0 = désactivé)
SERVER_SOCKET_TIMEOUT_MS=0

# --- OVH Object Storage ---
# Configuration OVH (à remplir avec vos identifiants OVH)
OVH_ENDPOINT=rbx-storage.example.com
OVH_REGION=rbx
OVH_ACCESS_KEY=your-access-key
OVH_SECRET_KEY=your-secret-key
OVH_CONTAINER=your-container-name
# URL de base pour accéder aux fichiers (sans le / à la fin)
OVH_BASE_URL=https://storage.example.com
# Taille maximale des fichiers en octets (500 Mo par défaut)
MAX_FILE_SIZE=524288000
# Types de fichiers autorisés (séparés par des virgules)
ALLOWED_FILE_TYPES=image/jpeg,image/png,application/pdf,video/mp4

# Origines CORS autorisées (séparées par des virgules). Par défaut utilise FRONTEND_URL.
# Exemple: CORS_ORIGINS=http://localhost:5173,https://app.golf-rougemont.com
CORS_ORIGINS=

# --- Rate Limiting (valeurs par défaut si non définies) ---
# Global: max requêtes par IP par fenêtre (défaut 300)
RL_GLOBAL_MAX=300
# Global: taille de fenêtre en minutes (défaut 1)
RL_GLOBAL_WINDOW_MIN=1

# Auth (login/reset): max tentatives (défaut 10)
RL_AUTH_MAX=10
# Auth: fenêtre en minutes (défaut 15)
RL_AUTH_WINDOW_MIN=15

# Forgot-password: max tentatives (défaut 5)
RL_FORGOT_MAX=5
# Forgot-password: fenêtre en minutes (défaut 15)
RL_FORGOT_WINDOW_MIN=15

# Register: max tentatives (défaut 5)
RL_REGISTER_MAX=5
# Register: fenêtre en minutes (défaut 60)
RL_REGISTER_WINDOW_MIN=60

# Resend verification: max tentatives (défaut 5)
RL_VERIFY_MAX=5
# Resend verification: fenêtre en minutes (défaut 30)
RL_VERIFY_WINDOW_MIN=30

# Connexion Mongo pour l'API (Docker)
# Utilise l'utilisateur root créé par l'init Mongo (authSource=admin)
MONGO_URI=mongodb://admin:change_me@database:27017/fairway?authSource=admin

# --- Base de données (timeouts) ---
# Timeout des requêtes Mongo (limite de temps d'exécution côté serveur)
DB_QUERY_MAX_TIME_MS=15000

# Connexion Mongo pour l'API (hors Docker, local)
# MONGO_URI=mongodb://localhost:27017/fairway

# --- Frontend ---
# Toujours inclure le préfixe /api/v1
VITE_API_URL=http://localhost:5000/api/v1
# Timeout global Axios (ms) pour éviter les requêtes pendantes
VITE_API_TIMEOUT_MS=20000

# Désactiver les checksums AWS SDK pour la compatibilité OVH sur les PUT pré-signés
AWS_SDK_REQUEST_CHECKSUM_CALCULATION=never

# --- Email (SendGrid) ---
# Clé API SendGrid (variable secrète)
SENDGRID_API_KEY=
# Adresse d'expédition (utilisée aussi côté SMTP)
# ex: "Golf Rougemont <noreply@golf-rougemont.com>"
EMAIL_FROM=

# --- Email SMTP (OVH Exchange) ---
# Utiliser SMTP comme fournisseur par défaut
EMAIL_PROVIDER=smtp
# Hôte SMTP OVH Exchange
SMTP_HOST=ex5.mail.ovh.net
# Port STARTTLS
SMTP_PORT=587
# Compte authentifié (boîte aux lettres)
SMTP_USER=info@golf-rougemont.com
# Mot de passe de la boîte (NE PAS COMMITTER)
SMTP_PASSWORD=

# --- Seed (optionnel, dev) ---
# Exécuter le seed automatiquement au démarrage du conteneur backend (0/1)
SEED_ON_START=0
# Comptes créés par le script de seed (si absents)
SEED_ADMIN_EMAIL=admin@example.local
SEED_ADMIN_PASSWORD=
SEED_INSTRUCTOR_EMAIL=instructor@example.local
SEED_INSTRUCTOR_PASSWORD=
SEED_PLAYER_EMAIL=player@example.local
SEED_PLAYER_PASSWORD=
SEED_PLAYER2_EMAIL=player2@example.local
SEED_PLAYER2_PASSWORD=
